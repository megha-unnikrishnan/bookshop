{% extends 'userview/index.html' %}
{% load static %}
{% block content %}

<div class="container">
    <div class="row">
        <div class="col-md-12">
            {% if query %}
            <h2 class="mt-4 mb-3">Search results for "{{ query }}"</h2>

            <div class="row">
                {% for i in listproducts %}
                <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                    <div class="product-item bg-light border rounded p-3 h-100">
                        <div class="product-title text-center">
                            <a href="{% url 'productdetail' i.id %}">{{ i.product.product_name|upper }}</a>
                            <div class="d-flex justify-content-center align-items-center mb-2">
                                <span title="{{ i.rating }}/5">
                                    <i style="color:#FF6F61" class="fa fa-star{% if i.rating < 0.5 %}-o{% elif i.rating >= 0.5 and i.rating < 1 %}-half-o{% endif %}" aria-hidden="true"></i>
                                    <i style="color:#FF6F61" class="fa fa-star{% if i.rating < 1.5 %}-o{% elif i.rating >= 1.5 and i.rating < 2 %}-half-o{% endif %}" aria-hidden="true"></i>
                                    <i style="color:#FF6F61" class="fa fa-star{% if i.rating < 2.5 %}-o{% elif i.rating >= 2.5 and i.rating < 3 %}-half-o{% endif %}" aria-hidden="true"></i>
                                    <i style="color:#FF6F61" class="fa fa-star{% if i.rating < 3.5 %}-o{% elif i.rating >= 3.5 and i.rating < 4 %}-half-o{% endif %}" aria-hidden="true"></i>
                                    <i style="color:#FF6F61" class="fa fa-star{% if i.rating < 4.5 %}-o{% elif i.rating >= 4.5 and i.rating < 5 %}-half-o{% endif %}" aria-hidden="true"></i>
                                </span>
                                <small class="text-muted ms-2">{{ i.rating }}/5</small>
                            </div>
                        </div>
                        <div class="product-image text-center mb-3">
                            <a href="{% url 'productdetail' i.id %}">
                                <img src="{{ i.product.product_image.url }}" alt="Product Image" style="width: 100%; height: 200px; object-fit: contain;">
                            </a>
                        </div>
                        <div class="product-action d-flex justify-content-center mb-3">
                            <a href="{% url 'productdetail' i.id %}" class="btn btn-sm btn-outline-secondary mx-1"><i class="fa fa-cart-plus"></i></a>
                            <a href="#" class="btn btn-sm btn-outline-secondary mx-1"><i class="fa fa-heart"></i></a>
                            <a href="#" class="btn btn-sm btn-outline-secondary mx-1"><i class="fa fa-search"></i></a>
                        </div>
                        <div class="product-price text-center">
            <h4 class="text-white"><span><i class="fas fa-rupee-sign text-white"></i></span>{{ i.price_sub_total|floatformat:"0" }}</h4>
            <h6 class="text-white"><span><i class="fas fa-rupee-sign text-white"></i></span><small><del>{{ i.product_price|floatformat:"0" }}</del></small></h6>
<!--            <a class="btn btn-sm btn-primary" ><i class="fa fa-shopping-cart"></i> Buy Now</a>-->
        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-md-12 text-center">
                    <div class="col-md-12">
                        <div class="card mb-4 shadow-sm text-center">
                            <div class="card-body">
                                <h2 class="mt-5" style="color:#FF6F61">No results found</h2>
                                <p class="lead">Check back later for updates or explore other categories.</p>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            </div><br>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}
